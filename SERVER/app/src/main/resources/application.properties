server.port=8080
# server.servlet.context-path=/api  # context path 제거 (프록시에서 처리)

# Spring Boot 애플리케이션 이름
spring.application.name=boss-server

# PostgreSQL 데이터베이스 설정 (환경 변수 필수)
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool 설정 (Supabase pooler 호환)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.initialization-fail-timeout=10000
# leak-detection-threshold 제거 (프로덕션 성능 오버헤드)

# JPA/Hibernate 설정
# 개발 초기: create-drop (애플리케이션 종료 시 테이블 삭제, 시작 시 재생성)
# create: 기존 테이블 삭제 후 재생성
# update: 스키마 변경만 적용 (프로덕션)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.hbm2ddl.auto=update
# Prepared statement 캐싱 비활성화 (Supabase pooler 호환)
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false

# 트랜잭션 격리 수준 설정 (동시성 제어)
# 1: READ_UNCOMMITTED, 2: READ_COMMITTED, 4: REPEATABLE_READ, 8: SERIALIZABLE
spring.jpa.properties.hibernate.connection.isolation=2

# Discord OAuth 설정 제거됨 (사용하지 않음)

# 캐싱 설정
spring.cache.type=simple
spring.cache.cache-names=todayBosses,raidRoom
spring.cache.caffeine.spec=maximumSize=100,expireAfterWrite=30s

# 로깅 설정
logging.level.root=INFO
logging.level.com.example=DEBUG

