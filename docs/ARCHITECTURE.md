# 실시간 보스 레이드 아키텍처

## 구조 개요

### 1. 방 목록 페이지 (BossListPage)
- **초기 로드**: REST API (`/api/bosses/today`)
- **실시간 업데이트**: WebSocket (`/topic/bosses/today`)
  - 다른 사용자가 방 생성 시 자동 업데이트
  - 방 완료 시 자동 제거
- **방 생성**: REST API (기존 유지)
- **방 입장**: 클릭으로 이동 (실시간 불필요)

### 2. 방 상세 페이지 (RaidRoomPage)
- **초기 로드**: REST API (`/api/raid-rooms/{id}`)
- **실시간 업데이트**: WebSocket (`/topic/raid-room/{id}`)
  - 채널 추가 시 자동 업데이트
  - 잡혔다 표시 시 자동 업데이트
  - 다른 사용자의 액션 실시간 반영
- **액션 수행**: REST API (채널 추가, 잡혔다 표시 등)

## DB 부하 최소화 전략

1. **서버 측 주기적 조회**: 5초마다 서버에서만 DB 조회
2. **변경 감지**: 해시값 비교로 변경사항 있을 때만 브로드캐스트
3. **이벤트 기반 즉시 업데이트**: 방 생성, 채널 추가 등 즉시 브로드캐스트
4. **클라이언트 폴링 제거**: WebSocket으로만 업데이트 수신

## 데이터 흐름

```
[클라이언트 A] 방 생성 → [REST API] → [DB 저장] → [WebSocket 브로드캐스트]
                                                      ↓
[클라이언트 B] ← WebSocket 수신 ← [서버] ← [DB 조회 (5초마다)]
```

